function displayAlertBox(e,t,s){t=t.substring(0,255),alertQueue.push({pseudo:e,message:t,amount:s}),isAlertActive||processAlertQueue()}function processAlertQueue(){if(0===alertQueue.length)return void(isAlertActive=!1);isAlertActive=!0;const e=alertQueue.shift(),{pseudo:t,message:s,amount:r}=e;var o=document.querySelector(".widget-alert-box");o.innerHTML="";var n=document.createElement("img");n.src=window.image,n.style.maxWidth="100%",n.classList.add("fade"),o.appendChild(n);let a=new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"});var i=document.createElement("p");i.innerHTML=window.message_template.replace("{pseudo}",t).replace("{message}",s).replace("{amount}",a.format(r/100)),i.style.marginTop="10px",i.classList.add("fade"),o.appendChild(i);var u=new Audio(window.sound);setTimeout(function(){n.classList.add("show"),i.classList.add("show"),u.volume=window.sound_volume,u.play()},100),setTimeout(function(){n.classList.remove("show"),i.classList.remove("show"),u.pause(),u.currentTime=0,o.innerHTML="",processAlertQueue()},window.alert_duration)}function fetch(){const e=new XMLHttpRequest;e.open("GET","/widget-stream-alert/"+window.charityStreamId+"/fetch",!0),e.onload=(()=>{if(200===e.status){const t=JSON.parse(e.response);t.donations.forEach(e=>{displayAlertBox(e.pseudo,e.message,e.amount)})}else console.error("Erreur lors de la récupération des données de donation:",e.response)}),e.send()}var alertQueue=[],isAlertActive=!1;